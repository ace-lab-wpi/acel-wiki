<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="dRonin wiki pages organized using mkdocs with cinder theme"> 
    <meta name="author" content="dRonin">  
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Introduction to Autotune - Development Guide - dRonin</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-89355455-1', 'http://rdu.im/dronin-dev-guide/');
    ga('send', 'pageview');
    </script>
    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Development Guide - dRonin</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Software <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../setup_dev_env/">Setup Devlopment Environment</a>
</li>

                        
                            
<li >
    <a href="../flight_modes/">Flight Modes</a>
</li>

                        
                            
<li >
    <a href="../uavtalk_protocol/">UAVTalk Protocol</a>
</li>

                        
                            
<li class="active">
    <a href="./">Introduction to Autotune</a>
</li>

                        
                            
<li >
    <a href="../firmware_arch/">Firmware Architecture</a>
</li>

                        
                            
<li >
    <a href="../firmware_modules/">Firmware Modules</a>
</li>

                        
                            
<li >
    <a href="../gcs_qt_build/">Build and Debug GCS using Qt Creator</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hardware <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../hardware/choose_fc/">Choosing A Flight Controller</a>
</li>

                        
                            
<li >
    <a href="../../hardware/hardware_id/">Hardware IDs</a>
</li>

                        
                            
<li >
    <a href="../../hardware/add_new_board/">Add A New Board Type</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../tutorials/create_new_uavobjects/">Create a New UAVObjects</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../contribute/contributing/">General Guide</a>
</li>

                        
                            
<li >
    <a href="../../contribute/coding_standards/">Coding Standards</a>
</li>

                        
                            
<li >
    <a href="../../contribute/pull_request/">Pull Request Policy</a>
</li>

                        
                            
<li >
    <a href="../../contribute/uavo_widget_relations/">UAVObject to Widget Relations</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../uavtalk_protocol/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../firmware_arch/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/rxdu/dRonin-docs">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#introduction-to-autotune">Introduction to Autotune</a></li>
        
            <li class="second-level"><a href="#warning">Warning</a></li>
            
        
            <li class="second-level"><a href="#autotune-process">Autotune Process</a></li>
            
                <li class="third-level"><a href="#add-autotune-to-the-flight-mode-switch">Add Autotune to the Flight Mode switch</a></li>
            
                <li class="third-level"><a href="#enable-autotune">Enable Autotune</a></li>
            
                <li class="third-level"><a href="#autotune-the-flight-controller">Autotune the flight controller</a></li>
            
                <li class="third-level"><a href="#verify-and-apply-the-settings">Verify and apply the settings</a></li>
            
                <li class="third-level"><a href="#fine-tune">Fine tune</a></li>
            
                <li class="third-level"><a href="#disable-autotune">Disable Autotune</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="introduction-to-autotune">Introduction to Autotune</h1>
<p>Autotune is an exciting feature originally developed on TauLabs and thoroughly improved in dRonin. The concept is to let the aircraft perform a calibration routine and try to come up with sane stability values without any user configuration.</p>
<p>With this module one can reconfigure his airframe in the field and perform an autotune on the spot to give a solid flying platform without manually trying to retune values for optimal performance.</p>
<p>Autotune used to be a complex step by step procedure, it has now reached a level of simplicity that makes documentation unnecessary. This page is mainly present to state how simple autotune is and to encourage anyone to try it without loosing to much time on the numerous deprecated procedures that can be find elsewhere and applicable to old OpenPilot or even Taulab.</p>
<h3 id="warning">Warning</h3>
<ul>
<li>Only Roll and Pitch are automatically tuned, for yaw tuning you will have to post/share your tunes (see below).</li>
<li>Currently this feature is intended for Multirotor Aircraft ONLY!</li>
<li>This plugin uses lots of resources. On CC3D boards, you should disable other modules (such as TxPID) before activating autotune, and use less than 5 inputs, preferably in PPM mode. PWM and DSM do use more resources.</li>
<li>This plugin is going to make your aircraft shake, etc, so test with some reasonable space.  </li>
<li>Once again: perform this operation in an open and safe environment, the aircraft is likely to gain altitude when the test starts and shed altitude when it ends (approx. 1m).</li>
<li>If your original PIDs are totally wrong, the aircraft is likely to shake a lot during the process. The better the aircraft flies before autotune, the less it will shake during the autotune process.</li>
</ul>
<h2 id="autotune-process">Autotune Process</h2>
<p>To use autotune, here are the steps:</p>
<h3 id="add-autotune-to-the-flight-mode-switch">Add Autotune to the Flight Mode switch</h3>
<ul>
<li>On the GCS Configuration page, select the Input section.</li>
<li>In the Input section, select the Flight Mode Switch Settings tab.</li>
<li>Set one of the Flight Mode Switch Positions settings to Autotune in the pull-down menu.</li>
<li>Click “Save”</li>
</ul>
<h3 id="enable-autotune">Enable Autotune</h3>
<ul>
<li>On the GCS Configuration page, select the Autotune section.</li>
<li>In the Autotune section, select the Pre-Autotune tab and check the “Enable Autotune Module” box.</li>
<li>Click “Save”.</li>
<li>Power cycle your board, i.e disconnect both battery &amp; USB!</li>
</ul>
<h3 id="autotune-the-flight-controller">Autotune the flight controller</h3>
<ul>
<li>Before you start Autotune, make a note of your current PID settings, you'll need these settings to compare them with the calculated values.</li>
<li>Take off normally and hover</li>
<li>Activate Autotune by moving Flight Mode switch into the selected position.</li>
<li>The aircraft will gain altitude and begin to oscillate.  Each axis takes approximately 30 seconds to calibrate, so expect this oscillation behaviour to last around 60 seconds.</li>
<li>Use your normal control inputs to maintain a hover in the general area, but try to minimize control inputs to the degree this is practical. The aircraft will stop oscillating and descend when Autotune cycle is complete.</li>
<li>With the craft still in Autotune mode, land the aircraft normally and disarm the flight-controller (this saves the calculation).</li>
<li>Check the controller is properly DISARMED, and shut-off the aircraft</li>
</ul>
<p>Note that unlike Taulabs and early pre-release, your autotune calculations are Saved! To do so, disarm while in autotune mode. On the contrary, if you change flightmode without disarming, autotune values will be discarded. Note2 in future release the settings could/will be saved as soon as the autotune has been fully completed (no need to disarm). To be confirmed...</p>
<p>For the record in Taulabs or early pre-release one had to leave the aircraft powered and maintain the flightmode to autotune otherwise Autotune calculations would have been lost. Older Taulab/OpenPilot documentation do reflect this and are crowded with complex procedures and safety measures aimed at not deleting the autotune data. dRonin autotune is much more simple in every way.</p>
<h3 id="verify-and-apply-the-settings">Verify and apply the settings</h3>
<ul>
<li>Connect the flight controller to the GCS</li>
<li>On the Configuration page, select the Autotune section.</li>
<li>Look at the “Computed Values” and compare them to your previous PID settings.</li>
<li>Move the damping and sensitivity slider so as to adjust the computed values to your flying style.</li>
<li>If the computed values are vastly different than the settings you were previously using, only use these new settings with caution.</li>
<li>If the Tau values are reported to big, just try another autotune without any outside wind turbulence to see if the Tau gets better. If the Tau still remains high (&gt; 0.05), you will probably have to reduce the damping value.</li>
<li>If you want to save the settings generated with Autotune to the board, click the “Apply Computed Values” button. This will apply the computed values in the [stabilization] tab. Note: your settings are not already saved on the flight controller yet.</li>
<li>Move to [stabilization], check the values again and click the “Save” button.</li>
</ul>
<h3 id="fine-tune">Fine tune</h3>
<ul>
<li>Go back to the field and test the aircraft with your favourite flight mode, DO NOT ACTIVATE the autotune flightmode as you could reset the previously calculated settings!</li>
<li>If you do not like the feel, just get back to the GCS, and adjust the damping / noise settings, until the behaviour suits your flying style. You can just repeat this damping/sensitivity adjustment as many time as necessary, with this respect dRonin is much more comprehensive than earlier OpenPilot &amp; Taulab firmware (not presuming the progress on Taulab as of 2016 though).</li>
<li>Once everything is satisfactory, just share your autotune results! As a bonus you'll get a guideline for Yaw fine tuning!</li>
</ul>
<h3 id="disable-autotune">Disable Autotune</h3>
<ul>
<li>Remove Autotune from your Flight Mode switch.</li>
<li>Disable Autotune by selecting the Pre-Autotune tab and unchecking the “Enable Autotune Module” box.</li>
<li>Click the “Save” button.</li>
<li>Power cycle your board, i.e disconnect both battery &amp; USB.</li>
</ul>
<p>Further readings : <a href="https://github.com/d-ronin/dRonin/raw/next/flight/Doc/Autotuning%20Derivation.pdf">PIDs Tuning by R. James Cotton</a></p></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>This documentation is © Copyright 2016 dRonin. Cinder theme is licensed under the <a href='https://github.com/chrissimpkins/cinder/blob/master/LICENSE.md'>MIT license</a><br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
